<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç©åˆ†ã‚¬ãƒãƒ£</title>

<!-- MathJax -->
<script>
  window.MathJax = {
    tex: { inlineMath: [['$', '$']] },
    svg: { fontCache: 'global' }
  };
</script>
<script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

<style>
body {
  font-family: system-ui, sans-serif;
  background: #f5f5f5;
  margin: 0;
  padding: 16px;
}
.container {
  max-width: 480px;
  margin: auto;
  background: #fff;
  padding: 16px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
h1 { text-align: center; }
select, button {
  width: 100%;
  padding: 12px;
  font-size: 1.1rem;
  margin-top: 10px;
}
button {
  background: #4f46e5;
  color: white;
  border: none;
  border-radius: 8px;
}
button.sub {
  background: #16a34a;
}
.box {
  margin-top: 16px;
  font-size: 1.2rem;
  min-height: 2em;
}
</style>
</head>

<body>
<div class="container">
  <h1>ğŸ² ç©åˆ†ã‚¬ãƒãƒ£</h1>

  <select id="level">
    <option value="easy">â˜… æ˜“ã—ã„</option>
    <option value="normal">â˜…â˜… æ™®é€š</option>
    <option value="hard">â˜…â˜…â˜… é›£ã—ã„</option>
  </select>

  <button onclick="spin()">ã‚¬ãƒãƒ£ã‚’å›ã™</button>
  <button class="sub" onclick="toggleAnswer()">ç­”ãˆã‚’è¡¨ç¤º / éè¡¨ç¤º</button>

  <div class="box" id="q"></div>
  <div class="box" id="a" style="display:none;"></div>
</div>

<script>
const data = [
  { q: "\\int x\\,dx", a: "\\frac{x^2}{2}+C", level: "easy" },
  { q: "\\int \\sin x\\,dx", a: "-\\cos x+C", level: "easy" },
  { q: "\\int \\cos x\\,dx", a: "\\sin x+C", level: "easy" },

  { q: "\\int x\\sin x\\,dx", a: "-x\\cos x+\\sin x+C", level: "normal" },
  { q: "\\int \\sin x\\cos x\\,dx", a: "\\frac12\\sin^2 x+C", level: "normal" },

  { q: "\\int \\frac{1}{\\cos x}\\,dx", a: "\\ln|\\sec x+\\tan x|+C", level: "hard" }
];

let current = null;

function spin() {
  const level = document.getElementById("level").value;
  const pool = data.filter(d => d.level === level);
  if (pool.length === 0) return;

  current = pool[Math.floor(Math.random() * pool.length)];

  document.getElementById("q").innerHTML =
    "å•é¡Œï¼š$" + current.q + "$";
  document.getElementById("a").innerHTML =
    "ç­”ãˆï¼š$" + current.a + "$";
  document.getElementById("a").style.display = "none";

  if (window.MathJax) MathJax.typesetPromise();
}

function toggleAnswer() {
  if (!current) return;
  const a = document.getElementById("a");
  a.style.display = (a.style.display === "none") ? "block" : "none";
  if (window.MathJax) MathJax.typesetPromise();
}
</script>
</body>
</html>
