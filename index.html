<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç©åˆ†ã‚¬ãƒãƒ£</title>

<script>
window.MathJax = {
  tex: { inlineMath: [['$', '$']] },
  startup: { typeset: false }
};
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" defer></script>

<style>
body { font-family: system-ui, sans-serif; background:#f5f5f5; padding:16px; }
.container { max-width:480px; margin:auto; background:#fff; padding:16px; border-radius:12px; }
button, select { width:100%; padding:12px; font-size:1.1rem; margin-top:10px; }
button { background:#4f46e5; color:#fff; border:none; border-radius:8px; }
button.sub { background:#16a34a; }
.box { margin-top:16px; font-size:1.2rem; min-height:2em; }
</style>
</head>

<body>
<div class="container">
  <h1>ğŸ² ç©åˆ†ã‚¬ãƒãƒ£</h1>

  <select id="level">
    <option value="easy">â˜… æ˜“ã—ã„</option>
    <option value="normal">â˜…â˜… æ™®é€š</option>
    <option value="hard">â˜…â˜…â˜… é›£ã—ã„</option>
  </select>

  <button id="spinBtn">ã‚¬ãƒãƒ£ã‚’å›ã™</button>
  <button id="ansBtn" class="sub">ç­”ãˆã‚’è¡¨ç¤º / éè¡¨ç¤º</button>

  <div id="q" class="box"></div>
  <div id="a" class="box" style="display:none;"></div>
</div>

<script>
let data = [];
let current = null;

// JSONèª­ã¿è¾¼ã¿
fetch("questions.json")
  .then(r => r.json())
  .then(json => data = json)
  .catch(() => alert("questions.json ãŒèª­ã¿è¾¼ã‚ã¾ã›ã‚“"));

document.getElementById("spinBtn").addEventListener("click", () => {
  if (data.length === 0) return;

  const level = document.getElementById("level").value;
  const pool = data.filter(d => d.level === level);
  if (pool.length === 0) return;

  current = pool[Math.floor(Math.random() * pool.length)];

  q.innerHTML = "å•é¡Œï¼š$" + current.q + "$";
  a.innerHTML = "ç­”ãˆï¼š$" + current.a + "$";
  a.style.display = "none";

  if (window.MathJax) MathJax.typesetPromise();
});

document.getElementById("ansBtn").addEventListener("click", () => {
  if (!current) return;
  a.style.display = (a.style.display === "none") ? "block" : "none";
  if (window.MathJax) MathJax.typesetPromise();
});
</script>
</body>
</html>
